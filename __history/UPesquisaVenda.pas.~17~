unit UPesquisaVenda;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Data.DB, Vcl.Grids, Vcl.DBGrids,
  Vcl.StdCtrls, Vcl.ExtCtrls, Vcl.Buttons, Vcl.DBCtrls, uniGUIBaseClasses,
  uniGUIClasses, uniPanel, Vcl.Mask;

type
  TfrmPesquisaVenda = class(TForm)
    dsPesquisaVenda: TDataSource;
    Panel1: TPanel;
    dbgrdPesquisar: TDBGrid;
    btnPesquisar2: TBitBtn;
    rgTipoPesquisa: TRadioGroup;
    lblCodigo: TLabel;
    edtVendaInicial: TEdit;
    edtVendaFinal: TEdit;
    lblVenIni: TLabel;
    lblVenFin: TLabel;
    procedure btnPesquisar2Click(Sender: TObject);
    procedure dbgrdPesquisarDblClick(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure rgTipoPesquisaClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    varCodigoVenda:  Integer;
  end;

var
  frmPesquisaVenda: TfrmPesquisaVenda;

implementation

uses
  UDados, UVendas;

{$R *.dfm}

procedure TfrmPesquisaVenda.btnPesquisar2Click(Sender: TObject);
var
    varTipoPesquisa   :string;
begin
    case rgTipoPesquisa.ItemIndex of
      0:
      begin;
        varTipoPesquisa := 'VD_NUMERO';
      end;
      1:
      begin;
        varTipoPesquisa := 'VD_DATA';
      end;
    end;
    with  DataModule1.cdsVenda do
    begin
      CommandText := 'SELECT * FROM VENDA WHERE ' + varTipoPesquisa + 'BETWEEN' +
      QuotedStr(edtVendaFinal.text) + 'AND' +  QuotedStr(edtVendaFinal.text);
      close;
      Open;
    end;
end;


procedure TfrmPesquisaVenda.dbgrdPesquisarDblClick(Sender: TObject);
begin
    varcodigoVenda := dbgrdPesquisar.Columns[0].Field.Value;
    ModalResult := mrOk;
end;

procedure TfrmPesquisaVenda.FormShow(Sender: TObject);
begin
//    edtInicio.Enabled   := False;
//    edtFim.Enabled      := False;
//    edtPesquisa.Enabled := False;
end;

procedure TfrmPesquisaVenda.rgTipoPesquisaClick(Sender: TObject);
begin
      case rgTipoPesquisa.ItemIndex of
    0:
    begin
        Panel1.Color            := clYellow;
        Panel1.Enabled          := True;
        edtVendaInicial.Enabled := True;
        edtVendaFinal.Enabled   := True;
        lblCodigo.Caption       := 'VENDA';
        lblCodigo.Color         := clSkyBlue;
    end;
    1:
    begin
        Panel1.Color            := clWhite;
        Panel1.Enabled          := False;
        edtVendaInicial.Enabled := True;
        edtVendaFinal.Enabled   := True;
        lblCodigo.Caption       := 'DATA';
        lblCodigo.Color         := clPurple;
    end;

    end;
end;

end.
